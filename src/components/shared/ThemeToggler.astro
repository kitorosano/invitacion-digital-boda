---
import ThemeIcon from "./icons/Theme.astro";
---

<button
  class="theme-toggle"
  aria-label="Cambiar tema"
  transition:persist="theme-toggler"
>
  <ThemeIcon class="light" size={24} />
</button>

<style>
  .theme-toggle {
    position: absolute;
    top: 1rem;
    right: 1rem;

    border: 1px solid var(--color-border);
    border-top: 1px solid var(--color-highlight);
    border-radius: 1rem;

    color: var(--color-text, #111);
    font-weight: 600;

    background: var(--color-bg);
    box-shadow: var(--shadow-sm);

    transition: all 0.3s ease;
    cursor: pointer;
    z-index: 10;
  }
</style>

<script>
  const $body = document.body;
  const $button = document.querySelector(".theme-toggle") as HTMLButtonElement;

  function toggleTheme() {
    $body.classList.toggle("dark");

    const isDark = $body.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  }

  $button.addEventListener("click", toggleTheme);
</script>
